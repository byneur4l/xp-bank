generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

// datasource db {
//   provider = "mysql"
//   url      = env("MYSQL_INTROSPECTION")
// }

datasource db {
  provider = "mysql"
  url = env("DB_LOCAL")
  referentialIntegrity = "prisma"
}

model AccountsBalance {
  id            Int        @id @default(autoincrement()) @db.UnsignedInt
  UsersLogin_id Int        @db.UnsignedInt
  balance       Float
  updated_at    DateTime   @default(now()) @updatedAt
  UsersLogin    UsersLogin @relation(fields: [UsersLogin_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "accountsbalance_userslogin_id_foreign")

  @@index([UsersLogin_id], map: "accountsbalance_userslogin_id_foreign")
}

model AccountsStatement {
  id         Int      @id @default(autoincrement()) @db.UnsignedInt
  value      Float
  Orders_id  Int      @db.UnsignedInt
  created_at DateTime @default(now())
  Orders     Orders   @relation(fields: [Orders_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "accountsstatement_orders_id_foreign")

  @@index([Orders_id], map: "accountsstatement_orders_id_foreign")
}

model Addresses {
  id            Int             @id @default(autoincrement()) @db.UnsignedInt
  logradouro    String          @db.VarChar(255)
  address       String          @db.VarChar(255)
  number        Int
  city          String          @db.VarChar(255)
  district      String          @db.VarChar(255)
  state         String          @db.VarChar(255)
  country       String          @db.VarChar(255)
  updated_at    DateTime        @default(now()) @updatedAt
  PersonalDatas PersonalDatas[]
}

model FSExchangeOverview {
  id                       Int                        @id @default(autoincrement()) @db.UnsignedInt
  opening_price            Float
  closing_price            Float
  quantity                 Int                        @db.UnsignedInt
  max                      Float
  min                      Float
  lot_min                  Int                        @db.UnsignedInt
  date                     DateTime                   @unique(map: "fsexchangeoverview_date_unique") @db.DateTime(0)
  StocksFSExchangeOverview StocksFSExchangeOverview[]
}

model Orders {
  id                Int                 @id @default(autoincrement()) @db.UnsignedInt
  Transactions_id   Int                 @db.UnsignedInt
  order_executed    Boolean
  created_at        DateTime            @default(now())
  sale_at           DateTime            @default(now())
  Transactions      Transactions        @relation(fields: [Transactions_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "orders_transactions_id_foreign")
  AccountsStatement AccountsStatement[]

  @@index([Transactions_id], map: "orders_transactions_id_foreign")
}

model PersonalDatas {
  id            Int        @id @default(autoincrement()) @db.UnsignedInt
  name          String     @db.VarChar(255)
  last_name     String     @db.VarChar(255)
  cpf           Int        @unique(map: "personaldatas_cpf_unique") @db.UnsignedInt
  rg            Int        @unique(map: "personaldatas_rg_unique") @db.UnsignedInt
  UsersLogin_id Int        @db.UnsignedInt
  Address_id    Int        @db.UnsignedInt
  updated_at    DateTime   @default(now()) @updatedAt
  Addresses     Addresses  @relation(fields: [Address_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "personaldatas_address_id_foreign")
  UsersLogin    UsersLogin @relation(fields: [UsersLogin_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "personaldatas_userslogin_id_foreign")

  @@index([Address_id], map: "personaldatas_address_id_foreign")
  @@index([UsersLogin_id], map: "personaldatas_userslogin_id_foreign")
}

model Stocks {
  id                       Int                        @id @default(autoincrement()) @db.UnsignedInt
  symbol                   String                     @unique(map: "stocks_symbol_unique") @db.VarChar(255)
  name                     String                     @db.VarChar(255)
  StocksFSExchangeOverview StocksFSExchangeOverview[]
  Tickers                  Tickers[]
}

model StocksFSExchangeOverview {
  id                    Int                @id @default(autoincrement()) @db.UnsignedInt
  Stocks_id             Int                @db.UnsignedInt
  FSExchangeOverview_id Int                @db.UnsignedInt
  FSExchangeOverview    FSExchangeOverview @relation(fields: [FSExchangeOverview_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "stocksfsexchangeoverview_fsexchangeoverview_id_foreign")
  Stocks                Stocks             @relation(fields: [Stocks_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "stocksfsexchangeoverview_stocks_id_foreign")

  @@index([FSExchangeOverview_id], map: "stocksfsexchangeoverview_fsexchangeoverview_id_foreign")
  @@index([Stocks_id], map: "stocksfsexchangeoverview_stocks_id_foreign")
}

model Tickers {
  id        Int    @id @default(autoincrement()) @db.UnsignedInt
  Stocks_id Int    @db.UnsignedInt
  ticker    String @unique(map: "tickers_ticker_unique") @db.VarChar(255)
  Stocks    Stocks @relation(fields: [Stocks_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "tickers_stocks_id_foreign")

  @@index([Stocks_id], map: "tickers_stocks_id_foreign")
}

model Transactions {
  id            Int      @id @default(autoincrement()) @db.UnsignedInt
  Wallets_id    Int      @db.UnsignedInt
  Stocks_symbol String   @db.VarChar(255)
  quantity      Int      @db.UnsignedInt
  price         Float
  type          Boolean
  created_at    DateTime @default(now())
  Wallets       Wallets  @relation(fields: [Wallets_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "transactions_wallets_id_foreign")
  Orders        Orders[]

  @@index([Wallets_id], map: "transactions_wallets_id_foreign")
}

model UsersLogin {
  id              Int               @id @default(autoincrement()) @db.UnsignedInt
  email           String            @unique(map: "userslogin_email_unique") @db.VarChar(255)
  password        String            @db.VarChar(255)
  created_at      DateTime          @default(now())
  updated_at      DateTime          @default(now()) @updatedAt
  AccountsBalance AccountsBalance[]
  PersonalDatas   PersonalDatas[]
  Wallets         Wallets[]
}

model Wallets {
  id            Int            @id @default(autoincrement()) @db.UnsignedInt
  name          String         @db.VarChar(255)
  UsersLogin_id Int            @db.UnsignedInt
  created_at    DateTime       @default(now())
  updated_at    DateTime       @default(now()) @updatedAt
  UsersLogin    UsersLogin     @relation(fields: [UsersLogin_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "wallets_userslogin_id_foreign")
  Transactions  Transactions[]

  @@index([UsersLogin_id], map: "wallets_userslogin_id_foreign")
}
